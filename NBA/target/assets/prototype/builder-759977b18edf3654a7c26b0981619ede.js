var Builder={NODEMAP:{AREA:"map",CAPTION:"table",COL:"table",COLGROUP:"table",LEGEND:"fieldset",OPTGROUP:"select",OPTION:"select",PARAM:"object",TBODY:"table",TD:"table",TFOOT:"table",TH:"table",THEAD:"table",TR:"table"},node:function(e){e=e.toUpperCase();var t=this.NODEMAP[e]||"div";var n=document.createElement(t);try{n.innerHTML="<"+e+"></"+e+">"}catch(r){}var i=n.firstChild||null;if(i&&i.tagName.toUpperCase()!=e)i=i.getElementsByTagName(e)[0];if(!i)i=document.createElement(e);if(!i)return;if(arguments[1])if(this._isStringOrNumber(arguments[1])||arguments[1]instanceof Array||arguments[1].tagName){this._children(i,arguments[1])}else{var s=this._attributes(arguments[1]);if(s.length){try{n.innerHTML="<"+e+" "+s+"></"+e+">"}catch(r){}i=n.firstChild||null;if(!i){i=document.createElement(e);for(attr in arguments[1])i[attr=="class"?"className":attr]=arguments[1][attr]}if(i.tagName.toUpperCase()!=e)i=n.getElementsByTagName(e)[0]}}if(arguments[2])this._children(i,arguments[2]);return i},_text:function(e){return document.createTextNode(e)},ATTR_MAP:{className:"class",htmlFor:"for"},_attributes:function(e){var t=[];for(attribute in e)t.push((attribute in this.ATTR_MAP?this.ATTR_MAP[attribute]:attribute)+'="'+e[attribute].toString().escapeHTML().gsub(/"/,"&quot;")+'"');return t.join(" ")},_children:function(e,t){if(t.tagName){e.appendChild(t);return}if(typeof t=="object"){t.flatten().each(function(t){if(typeof t=="object")e.appendChild(t);else if(Builder._isStringOrNumber(t))e.appendChild(Builder._text(t))})}else if(Builder._isStringOrNumber(t))e.appendChild(Builder._text(t))},_isStringOrNumber:function(e){return typeof e=="string"||typeof e=="number"},build:function(e){var t=this.node("div");$(t).update(e.strip());return t.down()},dump:function(e){if(typeof e!="object"&&typeof e!="function")e=window;var t=("A ABBR ACRONYM ADDRESS APPLET AREA B BASE BASEFONT BDO BIG BLOCKQUOTE BODY "+"BR BUTTON CAPTION CENTER CITE CODE COL COLGROUP DD DEL DFN DIR DIV DL DT EM FIELDSET "+"FONT FORM FRAME FRAMESET H1 H2 H3 H4 H5 H6 HEAD HR HTML I IFRAME IMG INPUT INS ISINDEX "+"KBD LABEL LEGEND LI LINK MAP MENU META NOFRAMES NOSCRIPT OBJECT OL OPTGROUP OPTION P "+"PARAM PRE Q S SAMP SCRIPT SELECT SMALL SPAN STRIKE STRONG STYLE SUB SUP TABLE TBODY TD "+"TEXTAREA TFOOT TH THEAD TITLE TR TT U UL VAR").split(/\s+/);t.each(function(t){e[t]=function(){return Builder.node.apply(Builder,[t].concat($A(arguments)))}})}}