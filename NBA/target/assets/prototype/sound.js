Sound={tracks:{},_enabled:true,template:new Template('<embed style="height:0" id="sound_#{track}_#{id}" src="#{url}" loop="false" autostart="true" hidden="true"/>'),enable:function(){Sound._enabled=true},disable:function(){Sound._enabled=false},play:function(e){if(!Sound._enabled)return;var t=Object.extend({track:"global",url:e,replace:false},arguments[1]||{});if(t.replace&&this.tracks[t.track]){$R(0,this.tracks[t.track].id).each(function(e){var n=$("sound_"+t.track+"_"+e);n.Stop&&n.Stop();n.remove()});this.tracks[t.track]=null}if(!this.tracks[t.track])this.tracks[t.track]={id:0};else this.tracks[t.track].id++;t.id=this.tracks[t.track].id;$$("body")[0].insert(Prototype.Browser.IE?new Element("bgsound",{id:"sound_"+t.track+"_"+t.id,src:t.url,loop:1,autostart:true}):Sound.template.evaluate(t))}};if(Prototype.Browser.Gecko&&navigator.userAgent.indexOf("Win")>0){if(navigator.plugins&&$A(navigator.plugins).detect(function(e){return e.name.indexOf("QuickTime")!=-1}))Sound.template=new Template('<object id="sound_#{track}_#{id}" width="0" height="0" type="audio/mpeg" data="#{url}"/>');else Sound.play=function(){}}