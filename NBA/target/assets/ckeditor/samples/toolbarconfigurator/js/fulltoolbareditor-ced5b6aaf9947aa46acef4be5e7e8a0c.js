window.ToolbarConfigurator={};(function(){function e(){this.instanceid="fte"+CKEDITOR.tools.getNextId();this.textarea=new CKEDITOR.dom.element("textarea");this.textarea.setAttributes({id:this.instanceid,name:this.instanceid,contentEditable:!0});this.editorInstance=this.buttons=null}ToolbarConfigurator.FullToolbarEditor=e;e.prototype.init=function(t){var n=this;document.body.appendChild(this.textarea.$);CKEDITOR.replace(this.instanceid);this.editorInstance=CKEDITOR.instances[this.instanceid];this.editorInstance.once("configLoaded",function(r){var i=r.editor.config;delete i.removeButtons;delete i.toolbarGroups;delete i.toolbar;ToolbarConfigurator.AbstractToolbarModifier.extendPluginsConfig(i);r.editor.once("loaded",function(){n.buttons=e.toolbarToButtons(n.editorInstance.toolbar);n.buttonsByGroup=e.groupButtons(n.buttons);n.buttonNamesByGroup=n.groupButtonNamesByGroup(n.buttons);r.editor.container.hide();"function"===typeof t&&t(n.buttons)})})};e.prototype.groupButtonNamesByGroup=function(t){var n=this;t=e.groupButtons(t);for(var r in t)t[r]=e.map(t[r],function(e){return n.getCamelCasedButtonName(e.name)});return t};e.prototype.getGroupByName=function(e){for(var t=this.editorInstance.config.toolbarGroups||this.getFullToolbarGroupsConfig(),n=t.length,r=0;r<n;r+=1)if(t[r].name===e)return t[r];return null};e.prototype.getCamelCasedButtonName=function(e){var t=this.editorInstance.ui.items,n;for(n in t)if(t[n].name==e)return n;return null};e.prototype.getFullToolbarGroupsConfig=function(e){e=!0===e?!0:!1;for(var t=[],n=this.editorInstance.toolbar,r=n.length,i=0;i<r;i+=1){var s=n[i],o={};"string"!=typeof s.name?e&&t.push("/"):(o.name=s.name,s.groups&&(o.groups=Array.prototype.slice.call(s.groups)),t.push(o))}return t};e.filter=function(e,t){for(var n=e&&e.length?e.length:0,r=[],i=0;i<n;i+=1)t(e[i])&&r.push(e[i]);return r};e.map=function(e,t){var n;if(CKEDITOR.tools.isArray(e)){n=[];for(var r=e.length,i=0;i<r;i+=1)n.push(t(e[i]))}else for(r in n={},e)n[r]=t(e[r]);return n};e.groupButtons=function(e){for(var t={},n=e.length,r=0;r<n;r+=1){var i=e[r],s=i.toolbar.split(",")[0];t[s]=t[s]||[];t[s].push(i)}return t};e.toolbarToButtons=function(t){for(var n=[],r=t.length,i=0;i<r;i+=1)"object"==typeof t[i]&&(n=n.concat(e.groupToButtons(t[i])));return n};e.createToolbarButton=function(t){var n=new CKEDITOR.dom.element("a"),r=e.createIcon(t.name,t.icon,t.command);n.setStyle("float","none");n.addClass("cke_"+("rtl"==CKEDITOR.lang.dir?"rtl":"ltr"));if(t instanceof CKEDITOR.ui.button)n.addClass("cke_button"),n.addClass("cke_toolgroup"),n.append(r);else if(CKEDITOR.ui.richCombo&&t instanceof CKEDITOR.ui.richCombo){var r=new CKEDITOR.dom.element("span"),i=new CKEDITOR.dom.element("span"),s=new CKEDITOR.dom.element("span");n.addClass("cke_combo_button");r.addClass("cke_combo_text");r.addClass("cke_combo_inlinelabel");r.setText(t.label);i.addClass("cke_combo_open");s.addClass("cke_combo_arrow");i.append(s);n.append(r);n.append(i)}return n};e.createIcon=function(e,t,n){var r=CKEDITOR.skin.getIconStyle(e,"rtl"==CKEDITOR.lang.dir),r=(r=r||CKEDITOR.skin.getIconStyle(t,"rtl"==CKEDITOR.lang.dir))||CKEDITOR.skin.getIconStyle(n,"rtl"==CKEDITOR.lang.dir);t=new CKEDITOR.dom.element("span");t.addClass("cke_button_icon");t.addClass("cke_button__"+e+"_icon");t.setAttribute("style",r);t.setStyle("float","none");return t};e.createButton=function(e,t){var n=new CKEDITOR.dom.element("button");n.addClass("button-a");n.setAttribute("type","button");if("string"==typeof t){t=t.split(" ");for(var r=t.length;r--;)n.addClass(t[r])}n.setHtml(e);return n};e.groupToButtons=function(t){for(var n=[],r=(t=t.items)?t.length:0,i=0;i<r;i+=1){var s=t[i];if(s instanceof CKEDITOR.ui.button||CKEDITOR.ui.richCombo&&s instanceof CKEDITOR.ui.richCombo)s.$=e.createToolbarButton(s),n.push(s)}return n}})()