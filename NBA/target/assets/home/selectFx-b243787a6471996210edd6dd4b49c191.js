(function(e){"use strict";function t(e,t){if(!e)return false;var n=e.target||e.srcElement||e||false;while(n&&n!=t){n=n.parentNode||false}return n!==false}function n(e,t){for(var n in t){if(t.hasOwnProperty(n)){e[n]=t[n]}}return e}function r(e,t){this.el=e;this.options=n({},this.options);n(this.options,t);this._init()}r.prototype.options={newTab:true,stickyPlaceholder:true,onChange:function(e){return false}};r.prototype._init=function(){var e=this.el.querySelector("option[selected]");this.hasDefaultPlaceholder=e&&e.disabled;this.selectedOpt=e||this.el.querySelector("option");this._createSelectEl();this.selOpts=[].slice.call(this.selEl.querySelectorAll("li[data-option]"));this.selOptsCount=this.selOpts.length;this.current=this.selOpts.indexOf(this.selEl.querySelector("li.cs-selected"))||-1;this.selPlaceholder=this.selEl.querySelector("span.cs-placeholder");this._initEvents()};r.prototype._createSelectEl=function(){var e=this,t="",n=function(e){var t="",n="",r="";if(e.selectedOpt&&!this.foundSelected&&!this.hasDefaultPlaceholder){n+="cs-selected ";this.foundSelected=true}if(e.getAttribute("data-class")){n+=e.getAttribute("data-class")}if(e.getAttribute("data-link")){r="data-link="+e.getAttribute("data-link")}if(n!==""){t='class="'+n+'" '}return"<li "+t+r+' data-option data-value="'+e.value+'"><span>'+e.textContent+"</span></li>"};[].slice.call(this.el.children).forEach(function(e){if(e.disabled){return}var r=e.tagName.toLowerCase();if(r==="option"){t+=n(e)}else if(r==="optgroup"){t+='<li class="cs-optgroup"><span>'+e.label+"</span><ul>";[].slice.call(e.children).forEach(function(e){t+=n(e)});t+="</ul></li>"}});var r='<div class="cs-options"><ul>'+t+"</ul></div>";this.selEl=document.createElement("div");this.selEl.className=this.el.className;this.selEl.tabIndex=this.el.tabIndex;this.selEl.innerHTML='<span class="cs-placeholder">'+this.selectedOpt.textContent+"</span>"+r;this.el.parentNode.appendChild(this.selEl);this.selEl.appendChild(this.el)};r.prototype._initEvents=function(){var e=this;this.selPlaceholder.addEventListener("click",function(){e._toggleSelect()});this.selOpts.forEach(function(t,n){t.addEventListener("click",function(){e.current=n;e._changeOption();e._toggleSelect()})});document.addEventListener("click",function(n){var r=n.target;if(e._isOpen()&&r!==e.selEl&&!t(r,e.selEl)){e._toggleSelect()}});this.selEl.addEventListener("keydown",function(t){var n=t.keyCode||t.which;switch(n){case 38:t.preventDefault();e._navigateOpts("prev");break;case 40:t.preventDefault();e._navigateOpts("next");break;case 32:t.preventDefault();if(e._isOpen()&&typeof e.preSelCurrent!="undefined"&&e.preSelCurrent!==-1){e._changeOption()}e._toggleSelect();break;case 13:t.preventDefault();if(e._isOpen()&&typeof e.preSelCurrent!="undefined"&&e.preSelCurrent!==-1){e._changeOption();e._toggleSelect()}break;case 27:t.preventDefault();if(e._isOpen()){e._toggleSelect()}break}})};r.prototype._navigateOpts=function(e){if(!this._isOpen()){this._toggleSelect()}var t=typeof this.preSelCurrent!="undefined"&&this.preSelCurrent!==-1?this.preSelCurrent:this.current;if(e==="prev"&&t>0||e==="next"&&t<this.selOptsCount-1){this.preSelCurrent=e==="next"?t+1:t-1;this._removeFocus();classie.add(this.selOpts[this.preSelCurrent],"cs-focus")}};r.prototype._toggleSelect=function(){this._removeFocus();if(this._isOpen()){if(this.current!==-1){this.selPlaceholder.textContent=this.selOpts[this.current].textContent}classie.remove(this.selEl,"cs-active")}else{if(this.hasDefaultPlaceholder&&this.options.stickyPlaceholder){this.selPlaceholder.textContent=this.selectedOpt.textContent}classie.add(this.selEl,"cs-active")}};r.prototype._changeOption=function(){if(typeof this.preSelCurrent!="undefined"&&this.preSelCurrent!==-1){this.current=this.preSelCurrent;this.preSelCurrent=-1}var t=this.selOpts[this.current];this.selPlaceholder.textContent=t.textContent;this.el.value=t.getAttribute("data-value");var n=this.selEl.querySelector("li.cs-selected");if(n){classie.remove(n,"cs-selected")}classie.add(t,"cs-selected");if(t.getAttribute("data-link")){if(this.options.newTab){e.open(t.getAttribute("data-link"),"_blank")}else{e.location=t.getAttribute("data-link")}}this.options.onChange(this.el.value)};r.prototype._isOpen=function(e){return classie.has(this.selEl,"cs-active")};r.prototype._removeFocus=function(e){var t=this.selEl.querySelector("li.cs-focus");if(t){classie.remove(t,"cs-focus")}};e.SelectFx=r})(window)